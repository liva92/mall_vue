{"remainingRequest":"C:\\Users\\67564\\Desktop\\site\\HYMall\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\67564\\Desktop\\site\\HYMall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\67564\\Desktop\\site\\HYMall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\67564\\Desktop\\site\\HYMall\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\67564\\Desktop\\site\\HYMall\\src\\views\\home\\Home.vue","mtime":1577183492491},{"path":"C:\\Users\\67564\\Desktop\\site\\HYMall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576308382003},{"path":"C:\\Users\\67564\\Desktop\\site\\HYMall\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\67564\\Desktop\\site\\HYMall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576308382003},{"path":"C:\\Users\\67564\\Desktop\\site\\HYMall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"C:\\\\Users\\\\67564\\\\Desktop\\\\site\\\\HYMall\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport NavBar from \"common/navbar/NavBar\";\nimport Scroll from \"common/scroll/Scroll\";\nimport TabControl from \"content/tabControl/TabControl\";\nimport BackTop from \"content/backTop/BackTop\";\nimport HomeSwiper from \"./childComps/HomeSwiper\";\nimport FeatureView from \"./childComps/FeatureView\";\nimport RecommendView from \"./childComps/RecommendView\";\nimport GoodsList from \"./childComps/GoodsList\";\nimport { getHomeMultidata, getHomeData, RECOMMEND, BANNER } from \"network/home\";\nimport { NEW, POP, SELL, BACKTOP_DISTANCE } from \"@/common/const\";\nexport default {\n  name: \"Home\",\n  components: {\n    NavBar: NavBar,\n    Scroll: Scroll,\n    TabControl: TabControl,\n    BackTop: BackTop,\n    HomeSwiper: HomeSwiper,\n    FeatureView: FeatureView,\n    RecommendView: RecommendView,\n    GoodsList: GoodsList\n  },\n  data: function data() {\n    return {\n      banners: [],\n      recommends: [],\n      goodsList: {\n        pop: {\n          page: 1,\n          list: []\n        },\n        new: {\n          page: 1,\n          list: []\n        },\n        sell: {\n          page: 1,\n          list: []\n        }\n      },\n      currentType: POP,\n      isTabFixed: false,\n      tabOffsetTop: 0,\n      showBackTop: false\n    };\n  },\n  computed: {\n    showGoodsList: function showGoodsList() {\n      return this.goodsList[this.currentType].list;\n    }\n  },\n  created: function created() {\n    // console.log('创建Home');\n    // 1.请求多个数据\n    this.getMultiData(); // 2.请求商品数据\n\n    this.getHomeProducts(POP);\n    this.getHomeProducts(NEW);\n    this.getHomeProducts(SELL);\n  },\n  activated: function activated() {\n    this.$refs.hSwiper.startTimer();\n  },\n  deactivated: function deactivated() {\n    this.$refs.hSwiper.stopTimer();\n  },\n  updated: function updated() {// this.tabOffsetTop = this.$refs.tabControl.$el.offsetTop\n    // console.log(this.tabOffsetTop);\n  },\n  methods: {\n    tabClick: function tabClick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = POP;\n          break;\n\n        case 1:\n          this.currentType = NEW;\n          break;\n\n        case 2:\n          this.currentType = SELL;\n          break;\n      }\n    },\n    contentScroll: function contentScroll(position) {\n      // 1.决定tabFixed是否显示\n      this.isTabFixed = -position.y > this.tabOffsetTop; // 2.决定backTop是否显示\n\n      this.showBackTop = -position.y > BACKTOP_DISTANCE;\n    },\n    loadMore: function loadMore() {\n      this.getHomeProducts(this.currentType);\n    },\n    backTop: function backTop() {\n      this.$refs.scroll.scrollTo(0, 0, 300);\n      console.log(\"回到顶部\");\n    },\n\n    /**\r\n     * 网络请求相关方法\r\n     */\n    getMultiData: function getMultiData() {\n      var _this = this;\n\n      getHomeMultidata().then(function (res) {\n        _this.banners = res.data[BANNER].list;\n        _this.recommends = res.data[RECOMMEND].list; // 下次更新DOM时,获取新的tabOffsetTop值(不保险,可以在updated钩子中获取)\n\n        _this.$nextTick(function () {\n          _this.tabOffsetTop = _this.$refs.tabControl.$el.offsetTop;\n        });\n      });\n    },\n    getHomeProducts: function getHomeProducts(type) {\n      var _this2 = this;\n\n      getHomeData(type, this.goodsList[type].page).then(function (res) {\n        var _this2$goodsList$type;\n\n        // console.log(res)\n        var goodsList = res.data.list;\n\n        (_this2$goodsList$type = _this2.goodsList[type].list).push.apply(_this2$goodsList$type, _toConsumableArray(goodsList));\n\n        _this2.goodsList[type].page += 1;\n\n        _this2.$refs.scroll.finishPullUp();\n      });\n    }\n  }\n};",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,OAAA,MAAA,MAAA,sBAAA;AACA,OAAA,MAAA,MAAA,sBAAA;AACA,OAAA,UAAA,MAAA,+BAAA;AACA,OAAA,OAAA,MAAA,yBAAA;AACA,OAAA,UAAA,MAAA,yBAAA;AACA,OAAA,WAAA,MAAA,0BAAA;AACA,OAAA,aAAA,MAAA,4BAAA;AACA,OAAA,SAAA,MAAA,wBAAA;AACA,SAAA,gBAAA,EAAA,WAAA,EAAA,SAAA,EAAA,MAAA,QAAA,cAAA;AACA,SAAA,GAAA,EAAA,GAAA,EAAA,IAAA,EAAA,gBAAA,QAAA,gBAAA;AAEA,eAAA;AACA,QAAA,MADA;AAEA,cAAA;AACA,kBADA;AAEA,kBAFA;AAGA,0BAHA;AAIA,oBAJA;AAKA,0BALA;AAMA,4BANA;AAOA,gCAPA;AAQA;AARA,GAFA;AAYA,MAZA,kBAYA;AACA,WAAA;AACA,eAAA,EADA;AAEA,kBAAA,EAFA;AAGA,iBAAA;AACA,aAAA;AAAA,gBAAA,CAAA;AAAA,gBAAA;AAAA,SADA;AAEA,aAAA;AAAA,gBAAA,CAAA;AAAA,gBAAA;AAAA,SAFA;AAGA,cAAA;AAAA,gBAAA,CAAA;AAAA,gBAAA;AAAA;AAHA,OAHA;AAQA,mBAAA,GARA;AASA,kBAAA,KATA;AAUA,oBAAA,CAVA;AAWA,mBAAA;AAXA,KAAA;AAaA,GA1BA;AA2BA,YAAA;AACA,iBADA,2BACA;AACA,aAAA,KAAA,SAAA,CAAA,KAAA,WAAA,EAAA,IAAA;AACA;AAHA,GA3BA;AAgCA,SAhCA,qBAgCA;AACA;AACA;AACA,SAAA,YAAA,GAHA,CAKA;;AACA,SAAA,eAAA,CAAA,GAAA;AACA,SAAA,eAAA,CAAA,GAAA;AACA,SAAA,eAAA,CAAA,IAAA;AACA,GAzCA;AA0CA,aAAA,qBAAA;AACA,SAAA,KAAA,CAAA,OAAA,CAAA,UAAA;AACA,GA5CA;AA6CA,eAAA,uBAAA;AACA,SAAA,KAAA,CAAA,OAAA,CAAA,SAAA;AACA,GA/CA;AAgDA,SAhDA,qBAgDA,CACA;AACA;AACA,GAnDA;AAoDA,WAAA;AACA,YADA,oBACA,KADA,EACA;AACA,cAAA,KAAA;AACA,aAAA,CAAA;AACA,eAAA,WAAA,GAAA,GAAA;AACA;;AACA,aAAA,CAAA;AACA,eAAA,WAAA,GAAA,GAAA;AACA;;AACA,aAAA,CAAA;AACA,eAAA,WAAA,GAAA,IAAA;AACA;AATA;AAWA,KAbA;AAcA,iBAdA,yBAcA,QAdA,EAcA;AACA;AACA,WAAA,UAAA,GAAA,CAAA,SAAA,CAAA,GAAA,KAAA,YAAA,CAFA,CAIA;;AACA,WAAA,WAAA,GAAA,CAAA,SAAA,CAAA,GAAA,gBAAA;AACA,KApBA;AAqBA,YArBA,sBAqBA;AACA,WAAA,eAAA,CAAA,KAAA,WAAA;AACA,KAvBA;AAwBA,WAxBA,qBAwBA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,CAAA,EAAA,CAAA,EAAA,GAAA;AACA,cAAA,GAAA,CAAA,MAAA;AACA,KA3BA;;AA4BA;;;AAGA,gBA/BA,0BA+BA;AAAA;;AACA,yBAAA,IAAA,CAAA,eAAA;AACA,cAAA,OAAA,GAAA,IAAA,IAAA,CAAA,MAAA,EAAA,IAAA;AACA,cAAA,UAAA,GAAA,IAAA,IAAA,CAAA,SAAA,EAAA,IAAA,CAFA,CAGA;;AACA,cAAA,SAAA,CAAA,YAAA;AACA,gBAAA,YAAA,GAAA,MAAA,KAAA,CAAA,UAAA,CAAA,GAAA,CAAA,SAAA;AACA,SAFA;AAGA,OAPA;AAQA,KAxCA;AAyCA,mBAzCA,2BAyCA,IAzCA,EAyCA;AAAA;;AACA,kBAAA,IAAA,EAAA,KAAA,SAAA,CAAA,IAAA,EAAA,IAAA,EAAA,IAAA,CAAA,eAAA;AAAA;;AACA;AACA,YAAA,YAAA,IAAA,IAAA,CAAA,IAAA;;AACA,wCAAA,SAAA,CAAA,IAAA,EAAA,IAAA,EAAA,IAAA,iDAAA,SAAA;;AACA,eAAA,SAAA,CAAA,IAAA,EAAA,IAAA,IAAA,CAAA;;AAEA,eAAA,KAAA,CAAA,MAAA,CAAA,YAAA;AACA,OAPA;AAQA;AAlDA;AApDA,CAAA","sourcesContent":["<template>\r\n  <div id=\"home\">\r\n    <nav-bar class=\"nav-bar\">\r\n      <div slot=\"center\">购物街</div>\r\n    </nav-bar>\r\n    <tab-control\r\n      v-show=\"isTabFixed\"\r\n      class=\"fixed\"\r\n      @itemClick=\"tabClick\"\r\n      :titles=\"['流行', '新款', '精选']\"\r\n    ></tab-control>\r\n    <scroll\r\n      class=\"content\"\r\n      ref=\"scroll\"\r\n      @scroll=\"contentScroll\"\r\n      @pullingUp=\"loadMore\"\r\n      :data=\"showGoodsList\"\r\n      :pull-up-load=\"true\"\r\n      :probe-type=\"3\"\r\n    >\r\n      <div>\r\n        <home-swiper :banners=\"banners\" ref=\"hSwiper\"></home-swiper>\r\n        <feature-view :features=\"recommends\"></feature-view>\r\n        <recommend-view></recommend-view>\r\n        <tab-control @itemClick=\"tabClick\" :titles=\"['流行', '新款', '精选']\" ref=\"tabControl\"></tab-control>\r\n        <goods-list :goods-list=\"showGoodsList\"></goods-list>\r\n      </div>\r\n    </scroll>\r\n    <back-top @backTop=\"backTop\" class=\"back-top\" v-show=\"showBackTop\">\r\n      <img src=\"~assets/img/common/top.png\" alt />\r\n    </back-top>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from \"common/navbar/NavBar\";\r\nimport Scroll from \"common/scroll/Scroll\";\r\nimport TabControl from \"content/tabControl/TabControl\";\r\nimport BackTop from \"content/backTop/BackTop\";\r\nimport HomeSwiper from \"./childComps/HomeSwiper\";\r\nimport FeatureView from \"./childComps/FeatureView\";\r\nimport RecommendView from \"./childComps/RecommendView\";\r\nimport GoodsList from \"./childComps/GoodsList\";\r\nimport { getHomeMultidata, getHomeData, RECOMMEND, BANNER } from \"network/home\";\r\nimport { NEW, POP, SELL, BACKTOP_DISTANCE } from \"@/common/const\";\r\n\r\nexport default {\r\n  name: \"Home\",\r\n  components: {\r\n    NavBar,\r\n    Scroll,\r\n    TabControl,\r\n    BackTop,\r\n    HomeSwiper,\r\n    FeatureView,\r\n    RecommendView,\r\n    GoodsList\r\n  },\r\n  data() {\r\n    return {\r\n      banners: [],\r\n      recommends: [],\r\n      goodsList: {\r\n        pop: { page: 1, list: [] },\r\n        new: { page: 1, list: [] },\r\n        sell: { page: 1, list: [] }\r\n      },\r\n      currentType: POP,\r\n      isTabFixed: false,\r\n      tabOffsetTop: 0,\r\n      showBackTop: false\r\n    };\r\n  },\r\n  computed: {\r\n    showGoodsList() {\r\n      return this.goodsList[this.currentType].list;\r\n    }\r\n  },\r\n  created() {\r\n    // console.log('创建Home');\r\n    // 1.请求多个数据\r\n    this.getMultiData();\r\n\r\n    // 2.请求商品数据\r\n    this.getHomeProducts(POP);\r\n    this.getHomeProducts(NEW);\r\n    this.getHomeProducts(SELL);\r\n  },\r\n  activated: function() {\r\n    this.$refs.hSwiper.startTimer();\r\n  },\r\n  deactivated: function() {\r\n    this.$refs.hSwiper.stopTimer();\r\n  },\r\n  updated() {\r\n    // this.tabOffsetTop = this.$refs.tabControl.$el.offsetTop\r\n    // console.log(this.tabOffsetTop);\r\n  },\r\n  methods: {\r\n    tabClick(index) {\r\n      switch (index) {\r\n        case 0:\r\n          this.currentType = POP;\r\n          break;\r\n        case 1:\r\n          this.currentType = NEW;\r\n          break;\r\n        case 2:\r\n          this.currentType = SELL;\r\n          break;\r\n      }\r\n    },\r\n    contentScroll(position) {\r\n      // 1.决定tabFixed是否显示\r\n      this.isTabFixed = -position.y > this.tabOffsetTop;\r\n\r\n      // 2.决定backTop是否显示\r\n      this.showBackTop = -position.y > BACKTOP_DISTANCE;\r\n    },\r\n    loadMore() {\r\n      this.getHomeProducts(this.currentType);\r\n    },\r\n    backTop() {\r\n      this.$refs.scroll.scrollTo(0, 0, 300);\r\n      console.log(\"回到顶部\");\r\n    },\r\n    /**\r\n     * 网络请求相关方法\r\n     */\r\n    getMultiData() {\r\n      getHomeMultidata().then(res => {\r\n        this.banners = res.data[BANNER].list;\r\n        this.recommends = res.data[RECOMMEND].list;\r\n        // 下次更新DOM时,获取新的tabOffsetTop值(不保险,可以在updated钩子中获取)\r\n        this.$nextTick(() => {\r\n          this.tabOffsetTop = this.$refs.tabControl.$el.offsetTop;\r\n        });\r\n      });\r\n    },\r\n    getHomeProducts(type) {\r\n      getHomeData(type, this.goodsList[type].page).then(res => {\r\n        // console.log(res)\r\n        const goodsList = res.data.list;\r\n        this.goodsList[type].list.push(...goodsList);\r\n        this.goodsList[type].page += 1;\r\n\r\n        this.$refs.scroll.finishPullUp();\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#home {\r\n  /*position: relative;*/\r\n  height: 100vh;\r\n}\r\n\r\n.nav-bar {\r\n  position: relative;\r\n  top: 0;\r\n  background-color: var(--color-tint);\r\n  font-weight: 700;\r\n  color: #fff;\r\n}\r\n\r\n.content {\r\n  position: absolute;\r\n  top: 44px;\r\n  bottom: 49px;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n\r\n.fixed {\r\n  position: fixed;\r\n  top: 44px;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n\r\n.back-top {\r\n  position: fixed;\r\n  right: 10px;\r\n  bottom: 60px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src\\views\\home"}]}